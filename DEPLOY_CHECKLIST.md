# éƒ¨ç½²å‰æ£€æŸ¥æ¸…å•

## ğŸ“¦ éœ€è¦æäº¤åˆ° Git çš„ä»£ç 

### âœ… å¿…é¡»æäº¤çš„æ–‡ä»¶

#### 1. æºä»£ç æ–‡ä»¶
- âœ… æ‰€æœ‰ `.ts`, `.tsx`, `.js`, `.jsx` æºä»£ç æ–‡ä»¶
- âœ… æ‰€æœ‰ `.css`, `.json` é…ç½®æ–‡ä»¶
- âœ… `package.json`, `package-lock.json` (ä¾èµ–ç®¡ç†)
- âœ… `tsconfig.json`, `eslint.config.js` (é…ç½®æ–‡ä»¶)
- âœ… `app.json`, `eas.json` (Expo é…ç½®)

#### 2. èµ„æºæ–‡ä»¶
- âœ… `assets/` ç›®å½•ä¸‹çš„æ‰€æœ‰å›¾ç‰‡ã€å­—ä½“ç­‰èµ„æº
- âœ… `public/` ç›®å½•ä¸‹çš„é™æ€èµ„æº

#### 3. æ•°æ®åº“ç›¸å…³
- âœ… `prisma/schema.prisma` (æ•°æ®åº“æ¨¡å‹å®šä¹‰)
- âœ… `prisma/migrations/` (æ•°æ®åº“è¿ç§»æ–‡ä»¶)
- âŒ `prisma/*.db` (æ•°æ®åº“æ–‡ä»¶ï¼Œä¸è¦æäº¤)

#### 4. é…ç½®æ–‡ä»¶ç¤ºä¾‹
- âœ… `.env.example` (ç¯å¢ƒå˜é‡ç¤ºä¾‹æ–‡ä»¶)
- âœ… `DEPLOYMENT.md`, `ENV_SETUP.md` (æ–‡æ¡£)

#### 5. æœåŠ¡å™¨ç«¯ä»£ç 
- âœ… `server/src/` (æ‰€æœ‰åç«¯æºä»£ç )
- âœ… `server/admin/src/` (ç®¡ç†åå°å‰ç«¯æºä»£ç )
- âœ… `server/admin/vite.config.ts` (æ„å»ºé…ç½®)
- âœ… `server/package.json`, `server/admin/package.json`

### âŒ ä¸éœ€è¦æäº¤çš„æ–‡ä»¶ï¼ˆå·²åœ¨ .gitignore ä¸­ï¼‰

#### 1. ä¾èµ–åŒ…
- âŒ `node_modules/` (æ‰€æœ‰ä¾èµ–åŒ…ï¼ŒæœåŠ¡å™¨ä¸Šä¼šé‡æ–°å®‰è£…)
- âŒ `package-lock.json` å¯ä»¥æäº¤ï¼Œä½† `node_modules/` ä¸è¦

#### 2. æ„å»ºäº§ç‰©
- âŒ `dist/` (æ„å»ºåçš„æ–‡ä»¶ï¼ŒæœåŠ¡å™¨ä¸Šä¼šé‡æ–°æ„å»º)
- âŒ `build/` (Android æ„å»ºäº§ç‰©)
- âŒ `android/app/build/` (Android ç¼–è¯‘æ–‡ä»¶)

#### 3. ç¯å¢ƒå˜é‡å’Œæ•æ„Ÿä¿¡æ¯
- âŒ `.env` (åŒ…å«æ•æ„Ÿä¿¡æ¯ï¼Œä¸è¦æäº¤)
- âœ… `.env.example` (ç¤ºä¾‹æ–‡ä»¶ï¼Œå¯ä»¥æäº¤)

#### 4. æ•°æ®åº“æ–‡ä»¶
- âŒ `*.db` (SQLite æ•°æ®åº“æ–‡ä»¶)
- âŒ `dev.db` (å¼€å‘æ•°æ®åº“)

#### 5. æ—¥å¿—å’Œä¸´æ—¶æ–‡ä»¶
- âŒ `*.log` (æ—¥å¿—æ–‡ä»¶)
- âŒ `.DS_Store` (macOS ç³»ç»Ÿæ–‡ä»¶)
- âŒ `Thumbs.db` (Windows ç³»ç»Ÿæ–‡ä»¶)

#### 6. IDE é…ç½®
- âŒ `.vscode/`, `.idea/` (IDE é…ç½®ï¼Œå¯é€‰)

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### 1. æäº¤ä»£ç åˆ° Git

```bash
# æ£€æŸ¥å“ªäº›æ–‡ä»¶ä¼šè¢«æäº¤
git status

# æ·»åŠ æ‰€æœ‰éœ€è¦æäº¤çš„æ–‡ä»¶
git add .

# æ£€æŸ¥æ˜¯å¦æœ‰æ•æ„Ÿæ–‡ä»¶è¢«æ„å¤–æ·»åŠ 
git status

# æäº¤ä»£ç 
git commit -m "å‡†å¤‡éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ"

# æ¨é€åˆ°è¿œç¨‹ä»“åº“
git push origin main
```

### 2. åœ¨æœåŠ¡å™¨ä¸Šæ‹‰å–ä»£ç 

```bash
# SSH è¿æ¥åˆ°æœåŠ¡å™¨
ssh user@your-server.com

# è¿›å…¥é¡¹ç›®ç›®å½•
cd /path/to/project

# æ‹‰å–æœ€æ–°ä»£ç 
git pull origin main
```

### 3. åœ¨æœåŠ¡å™¨ä¸Šå®‰è£…ä¾èµ–

```bash
# å®‰è£…æœåŠ¡å™¨ç«¯ä¾èµ–
cd server
npm install

# å®‰è£…ç®¡ç†åå°å‰ç«¯ä¾èµ–
cd admin
npm install
cd ..

# ç”Ÿæˆ Prisma Client
npx prisma generate

# è¿è¡Œæ•°æ®åº“è¿ç§»
npx prisma migrate deploy
```

### 4. é…ç½®ç¯å¢ƒå˜é‡

```bash
# åˆ›å»ºæœåŠ¡å™¨ç«¯ .env æ–‡ä»¶
cd server
cp .env.example .env
nano .env  # ç¼–è¾‘ç¯å¢ƒå˜é‡

# åˆ›å»ºç®¡ç†åå°å‰ç«¯ .env æ–‡ä»¶
cd admin
cp .env.example .env
nano .env  # ç¼–è¾‘ç¯å¢ƒå˜é‡
```

### 5. æ„å»ºåº”ç”¨

```bash
# æ„å»ºç®¡ç†åå°å‰ç«¯
cd server/admin
npm run build

# å›åˆ°æœåŠ¡å™¨æ ¹ç›®å½•
cd ..
```

### 6. å¯åŠ¨æœåŠ¡

```bash
# ä½¿ç”¨ PM2 å¯åŠ¨ï¼ˆæ¨èï¼‰
pm2 start npm --name "gamecube-server" -- start

# æˆ–ç›´æ¥å¯åŠ¨
NODE_ENV=production npm start
```

## âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹

### 1. ç¯å¢ƒå˜é‡å®‰å…¨
- âŒ **ç»å¯¹ä¸è¦**å°† `.env` æ–‡ä»¶æäº¤åˆ° Git
- âœ… åªæäº¤ `.env.example` ä½œä¸ºæ¨¡æ¿
- âœ… åœ¨æœåŠ¡å™¨ä¸Šæ‰‹åŠ¨åˆ›å»º `.env` æ–‡ä»¶

### 2. æ•°æ®åº“
- âŒ ä¸è¦æäº¤æ•°æ®åº“æ–‡ä»¶ï¼ˆ`.db`ï¼‰
- âœ… åªæäº¤æ•°æ®åº“è¿ç§»æ–‡ä»¶ï¼ˆ`migrations/`ï¼‰
- âœ… åœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œ `prisma migrate deploy` åˆ›å»ºæ•°æ®åº“

### 3. ä¾èµ–ç®¡ç†
- âœ… æäº¤ `package.json` å’Œ `package-lock.json`
- âŒ ä¸è¦æäº¤ `node_modules/`
- âœ… åœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œ `npm install` å®‰è£…ä¾èµ–

### 4. æ„å»ºäº§ç‰©
- âŒ ä¸è¦æäº¤ `dist/` æˆ– `build/` ç›®å½•
- âœ… åœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œ `npm run build` ç”Ÿæˆæ„å»ºäº§ç‰©

## ğŸ“‹ å¿«é€Ÿæ£€æŸ¥å‘½ä»¤

```bash
# æ£€æŸ¥æ˜¯å¦æœ‰æ•æ„Ÿæ–‡ä»¶è¢«æ·»åŠ 
git status | grep -E "\.env$|\.db$|node_modules/|dist/"

# æ£€æŸ¥ .gitignore æ˜¯å¦æ­£ç¡®
cat .gitignore | grep -E "\.env$|\.db$|node_modules|dist"

# æŸ¥çœ‹å³å°†æäº¤çš„æ–‡ä»¶
git diff --cached --name-only
```

## ğŸ”’ å®‰å…¨æ£€æŸ¥

éƒ¨ç½²å‰ç¡®ä¿ï¼š

- [ ] `.env` æ–‡ä»¶æ²¡æœ‰è¢«æäº¤
- [ ] æ•°æ®åº“æ–‡ä»¶æ²¡æœ‰è¢«æäº¤
- [ ] `node_modules/` æ²¡æœ‰è¢«æäº¤
- [ ] æ„å»ºäº§ç‰©æ²¡æœ‰è¢«æäº¤
- [ ] æ‰€æœ‰æ•æ„Ÿä¿¡æ¯éƒ½åœ¨ `.env` æ–‡ä»¶ä¸­
- [ ] `.env.example` æ–‡ä»¶å·²æ›´æ–°
- [ ] æœåŠ¡å™¨ä¸Šçš„ `.env` æ–‡ä»¶å·²æ­£ç¡®é…ç½®
